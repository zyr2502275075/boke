/*
|--------------------------------------------------------------------------
| env配置读取
|--------------------------------------------------------------------------
|
*/

const fs = require('fs');

/*
|--------------------------------------------------------------------------
| env配置文件路径
|--------------------------------------------------------------------------
|
*/
const path = '.env'

/*
|--------------------------------------------------------------------------
| 读取并导出.env配置
|--------------------------------------------------------------------------
|
*/
module.exports = (name) => {

    /*
    |--------------------------------------------------------------------------
    | 验证配置文件是否存在
    |--------------------------------------------------------------------------
    |
    */
    if (fs.existsSync(path)) {

        /*
        |--------------------------------------------------------------------------
        | 读取配置文件
        |--------------------------------------------------------------------------
        |
        */
        let data = fs.readFileSync(path);
        data = data.toString();

        /*
        |--------------------------------------------------------------------------
        | 拆分配置文件
        |--------------------------------------------------------------------------
        |
        */
        let cfgArr = data.split('\n');
        for (let i = 0; i < cfgArr.length; i++) {
            let cfg = cfgArr[i].split('=');
            if (cfg[0] == name) {
                return cfg[1];
            }
        }
    }
    return null;
}